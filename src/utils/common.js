// 会议室数据
export const MEETING_ROOMS = [
  // B座会议室
  { id: 'B0511', name: '地铁大厦B0511', building: 'B', floor: 5 },
  { id: 'B0512', name: '地铁大厦B0512', building: 'B', floor: 5 },
  { id: 'B0611', name: '地铁大厦B0611', building: 'B', floor: 6 },
  { id: 'B0711', name: '地铁大厦B0711', building: 'B', floor: 7 },
  { id: 'B0712', name: '地铁大厦B0712', building: 'B', floor: 7 },
  { id: 'B0911', name: '地铁大厦B0911', building: 'B', floor: 9 },
  { id: 'B0912', name: '地铁大厦B0912', building: 'B', floor: 9 },
  { id: 'B1011', name: '地铁大厦B1011', building: 'B', floor: 10 },
  { id: 'B1111', name: '地铁大厦B1111', building: 'B', floor: 11 },
  { id: 'B1012', name: '地铁大厦B1012', building: 'B', floor: 10 },
  { id: 'B1112', name: '地铁大厦B1112', building: 'B', floor: 11 },
  { id: 'B1211', name: '地铁大厦B1211', building: 'B', floor: 12 },
  { id: 'B1212', name: '地铁大厦B1212', building: 'B', floor: 12 },
  { id: 'B1312', name: '地铁大厦B1312', building: 'B', floor: 13 },
  { id: 'B1411', name: '地铁大厦B1411', building: 'B', floor: 14 },
  { id: 'B1511', name: '地铁大厦B1511', building: 'B', floor: 15 },
  { id: 'B1512', name: '地铁大厦B1512', building: 'B', floor: 15 },
  { id: 'B1301', name: '地铁大厦B1301', building: 'B', floor: 13 },
  { id: 'B0906', name: '地铁大厦B0906', building: 'B', floor: 9 },
  { id: 'B1313', name: '地铁大厦B1313', building: 'B', floor: 13 },
  { id: 'B1110', name: '地铁大厦B1110', building: 'B', floor: 11 },
  
  // A座会议室
  { id: 'A阶梯会议室', name: '地铁大厦A阶梯会议室', building: 'A', floor: 1 },
  { id: 'A0505', name: '地铁大厦A0505', building: 'A', floor: 5 },
  { id: 'A0506', name: '地铁大厦A0506', building: 'A', floor: 5 },
  { id: 'A0613', name: '地铁大厦A0613', building: 'A', floor: 6 },
  { id: 'A0614', name: '地铁大厦A0614', building: 'A', floor: 6 },
  { id: 'A0715', name: '地铁大厦A0715', building: 'A', floor: 7 },
  { id: 'A0716', name: '地铁大厦A0716', building: 'A', floor: 7 },
  { id: 'A0815', name: '地铁大厦A0815', building: 'A', floor: 8 },
  { id: 'A0816', name: '地铁大厦A0816', building: 'A', floor: 8 },
  { id: 'A0914', name: '地铁大厦A0914', building: 'A', floor: 9 },
  { id: 'A0915', name: '地铁大厦A0915', building: 'A', floor: 9 },
  { id: 'A1014', name: '地铁大厦A1014', building: 'A', floor: 10 },
  { id: 'A1015', name: '地铁大厦A1015', building: 'A', floor: 10 },
  { id: 'A1102', name: '地铁大厦A1102', building: 'A', floor: 11 },
  { id: 'A1101', name: '地铁大厦A1101', building: 'A', floor: 11 },
  { id: 'A1108', name: '地铁大厦A1108', building: 'A', floor: 11 },
  { id: 'A1107', name: '地铁大厦A1107', building: 'A', floor: 11 },
  { id: 'A1106', name: '地铁大厦A1106', building: 'A', floor: 11 },
  { id: 'A1104', name: '地铁大厦A1104', building: 'A', floor: 11 },
  { id: 'A1103', name: '地铁大厦A1103', building: 'A', floor: 11 },
  { id: 'A1211', name: '地铁大厦A1211', building: 'A', floor: 12 },
  { id: 'A1212', name: '地铁大厦A1212', building: 'A', floor: 12 },
  { id: 'A1311', name: '地铁大厦A1311', building: 'A', floor: 13 },
  { id: 'A1312', name: '地铁大厦A1312', building: 'A', floor: 13 },
  { id: 'A1408', name: '地铁大厦A1408', building: 'A', floor: 14 },
  { id: 'A1409', name: '地铁大厦A1409', building: 'A', floor: 14 },
  { id: 'A1514', name: '地铁大厦A1514', building: 'A', floor: 15 },
  { id: 'A1515', name: '地铁大厦A1515', building: 'A', floor: 15 },
  { id: 'A1615', name: '地铁大厦A1615', building: 'A', floor: 16 },
  { id: 'A1616', name: '地铁大厦A1616', building: 'A', floor: 16 },
  { id: 'A1708', name: '地铁大厦A1708', building: 'A', floor: 17 },
  { id: 'A2015', name: '地铁大厦A2015', building: 'A', floor: 20 },
  { id: 'A2016', name: '地铁大厦A2016', building: 'A', floor: 20 },
  { id: 'A2113', name: '地铁大厦A2113', building: 'A', floor: 21 },
  { id: 'A2312', name: '地铁大厦A2312', building: 'A', floor: 23 },
  { id: 'A2313', name: '地铁大厦A2313', building: 'A', floor: 23 },
  { id: 'A2412', name: '地铁大厦A2412', building: 'A', floor: 24 },
  { id: 'A2413', name: '地铁大厦A2413', building: 'A', floor: 24 }
]

// 获取所有会议室
export const getMeetingRooms = () => {
  return MEETING_ROOMS
}

// 根据ID获取会议室信息
export const getMeetingRoomById = (id) => {
  return MEETING_ROOMS.find(room => room.id === id)
}

// 根据楼栋获取会议室
export const getMeetingRoomsByBuilding = (building) => {
  return MEETING_ROOMS.filter(room => room.building === building)
}

// 根据楼层获取会议室
export const getMeetingRoomsByFloor = (building, floor) => {
  return MEETING_ROOMS.filter(room => room.building === building && room.floor === floor)
}

// 获取URL参数
export const getUrlParams = () => {
  const params = new URLSearchParams(window.location.search)
  const result = {}
  for (const [key, value] of params) {
    result[key] = value
  }
  return result
}

// 格式化日期
export const formatDate = (date, format = 'YYYY-MM-DD') => {
  const d = new Date(date)
  const year = d.getFullYear()
  const month = String(d.getMonth() + 1).padStart(2, '0')
  const day = String(d.getDate()).padStart(2, '0')
  const hour = String(d.getHours()).padStart(2, '0')
  const minute = String(d.getMinutes()).padStart(2, '0')
  const second = String(d.getSeconds()).padStart(2, '0')
  
  return format
    .replace('YYYY', year)
    .replace('MM', month)
    .replace('DD', day)
    .replace('HH', hour)
    .replace('mm', minute)
    .replace('ss', second)
}

// 格式化时间
export const formatTime = (date) => {
  return formatDate(date, 'HH:mm')
}

// 格式化日期时间
export const formatDateTime = (date) => {
  return formatDate(date, 'YYYY-MM-DD HH:mm')
}

// 获取相对时间
export const getRelativeTime = (date) => {
  const now = new Date()
  const target = new Date(date)
  const diff = now - target
  
  const minute = 60 * 1000
  const hour = 60 * minute
  const day = 24 * hour
  
  if (diff < minute) {
    return '刚刚'
  } else if (diff < hour) {
    return `${Math.floor(diff / minute)}分钟前`
  } else if (diff < day) {
    return `${Math.floor(diff / hour)}小时前`
  } else {
    return `${Math.floor(diff / day)}天前`
  }
}

// 生成唯一ID
export const generateId = (prefix = '') => {
  return `${prefix}${Date.now()}_${Math.random().toString(36).substr(2, 9)}`
}

// 防抖函数
export const debounce = (func, wait) => {
  let timeout
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout)
      func(...args)
    }
    clearTimeout(timeout)
    timeout = setTimeout(later, wait)
  }
}

// 节流函数
export const throttle = (func, limit) => {
  let inThrottle
  return function() {
    const args = arguments
    const context = this
    if (!inThrottle) {
      func.apply(context, args)
      inThrottle = true
      setTimeout(() => inThrottle = false, limit)
    }
  }
}

// 深拷贝
export const deepClone = (obj) => {
  if (obj === null || typeof obj !== 'object') {
    return obj
  }
  
  if (obj instanceof Date) {
    return new Date(obj.getTime())
  }
  
  if (obj instanceof Array) {
    return obj.map(item => deepClone(item))
  }
  
  if (typeof obj === 'object') {
    const clonedObj = {}
    for (const key in obj) {
      if (obj.hasOwnProperty(key)) {
        clonedObj[key] = deepClone(obj[key])
      }
    }
    return clonedObj
  }
}

// 获取当前时间段
export const getCurrentShift = () => {
  const hour = new Date().getHours()
  if (hour >= 8 && hour < 12) {
    return 'morning' // 早班 8:00-12:00
  } else if (hour >= 12 && hour < 18) {
    return 'afternoon' // 午班 12:00-18:00
  } else if (hour >= 18 && hour < 22) {
    return 'evening' // 晚班 18:00-22:00
  } else {
    return 'off' // 非工作时间
  }
}

// 获取时间段名称
export const getShiftName = (shift) => {
  const names = {
    morning: '早班',
    afternoon: '午班',
    evening: '晚班',
    off: '非工作时间'
  }
  return names[shift] || '未知'
}

// 验证手机号
export const validatePhone = (phone) => {
  const regex = /^1[3-9]\d{9}$/
  return regex.test(phone)
}

// 验证邮箱
export const validateEmail = (email) => {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  return regex.test(email)
}

// 本地存储工具
export const storage = {
  set(key, value) {
    try {
      localStorage.setItem(key, JSON.stringify(value))
    } catch (error) {
      console.error('存储数据失败:', error)
    }
  },
  
  get(key, defaultValue = null) {
    try {
      const value = localStorage.getItem(key)
      return value ? JSON.parse(value) : defaultValue
    } catch (error) {
      console.error('读取数据失败:', error)
      return defaultValue
    }
  },
  
  remove(key) {
    try {
      localStorage.removeItem(key)
    } catch (error) {
      console.error('删除数据失败:', error)
    }
  },
  
  clear() {
    try {
      localStorage.clear()
    } catch (error) {
      console.error('清空数据失败:', error)
    }
  }
}